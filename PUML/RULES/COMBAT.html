<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>PUML - Combat</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../RULES/EQUIPMENT.html" rel="next">
<link href="../RULES/ATTRIBUTES.html" rel="prev">
<link href="..//images/Gaia_favicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../images/Gaia.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">PUML</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text">Intro</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../RULES/NARRATION_AND_ROLLS.html" rel="" target="" aria-current="page">
 <span class="menu-text">Rules</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../CHARACTER/CREATION.html" rel="" target="">
 <span class="menu-text">Character</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../BELIEFS/BELIEFS.html" rel="" target="">
 <span class="menu-text">Beliefs</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../REFEREE/REFEREE.html" rel="" target="">
 <span class="menu-text">Referee</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../RESOURCES/RESOURCES.html" rel="" target="">
 <span class="menu-text">Resources</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://ko-fi.com/waveofinspiration" rel="" target=""><i class="bi bi-cup" role="img" aria-label="Ko-fi">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/m-gemmell/PRIMEVAL_DEITIES" rel="" target=""><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../RULES/COMBAT.html">Combat</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../RULES/NARRATION_AND_ROLLS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Narration and rolls</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../RULES/ATTRIBUTES.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Attributes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../RULES/COMBAT.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Combat</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../RULES/EQUIPMENT.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Equipment</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../RULES/REST_DEATH_AND_FREEDOM.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Rest, Death, and Freedom</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../RULES/MISSION_END.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mission end</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#phases" id="toc-phases" class="nav-link active" data-scroll-target="#phases"><strong>Phases</strong></a></li>
  <li><a href="#offense-outcomes" id="toc-offense-outcomes" class="nav-link" data-scroll-target="#offense-outcomes"><strong>Offense outcomes</strong></a></li>
  <li><a href="#defence-outcomes" id="toc-defence-outcomes" class="nav-link" data-scroll-target="#defence-outcomes"><strong>Defence outcomes</strong></a></li>
  <li><a href="#combat-threat-action-trackker" id="toc-combat-threat-action-trackker" class="nav-link" data-scroll-target="#combat-threat-action-trackker"><strong>Combat threat &amp; action trackker</strong></a></li>
  <li><a href="#combat-threat-levels" id="toc-combat-threat-levels" class="nav-link" data-scroll-target="#combat-threat-levels"><strong>Combat threat levels</strong></a></li>
  <li><a href="#threat-action-tracker" id="toc-threat-action-tracker" class="nav-link" data-scroll-target="#threat-action-tracker"><strong>Threat &amp; action tracker</strong></a></li>
  <li><a href="#outcomes" id="toc-outcomes" class="nav-link" data-scroll-target="#outcomes"><strong>Outcomes</strong></a></li>
  <li><a href="#complications-ultra-successes" id="toc-complications-ultra-successes" class="nav-link" data-scroll-target="#complications-ultra-successes"><strong>Complications &amp; ultra successes</strong></a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Combat</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><strong>Combat</strong> occurs when 2 or more forces are trying to harm each other. PCs only are in <strong>Combat</strong> and can take <strong>combat actions</strong> if they fulfill the two conditions:</p>
<ol type="1">
<li><p>They are in the <strong>combat</strong> zone</p></li>
<li><p>Enemies are aware of them</p></li>
</ol>
<p><strong>Combat</strong> normally ends by defeating all enemy forces or retreating/escaping. Escaping/retreating may require <strong>non-combat action turns</strong>.</p>
<section id="phases" class="level2">
<h2 class="anchored" data-anchor-id="phases"><strong>Phases</strong></h2>
<p><strong>Offense:</strong> Players take turns taking <strong>offense actions</strong> with either their <strong>PCs</strong> or allied <strong>NPCs</strong>. They normally narrate how they want to harm/hinder the enemy with the <strong>action roll</strong> determining the <strong>outcome</strong>. However, they may perform other tasks.</p>
<p><strong>Defence:</strong> The <strong>enemy</strong> attacks and the players narrate how they intend to avoid the damage/hindrance. The player performs a <strong>defence action</strong> turn to determine the <strong>outcome</strong>.</p>
<p>The <strong>phase</strong> changes when X <strong>combat action turns</strong> have been taken (see below).</p>
<p>An <strong>Offense phase</strong> &amp; <strong>Defence phase</strong> equals a <strong>combat round</strong>.</p>
</section>
<section id="offense-outcomes" class="level2">
<h2 class="anchored" data-anchor-id="offense-outcomes"><strong>Offense outcomes</strong></h2>
<p><strong>Failure:</strong> <strong>No damage</strong> dealt, +1 extra space moved on <strong>Offense</strong> <strong>Action tracker</strong></p>
<p><strong>Partial success:</strong> Character <strong>deals damage</strong> but suffers an <strong>offense complication</strong></p>
<p><strong>Success:</strong> Character <strong>deals damage</strong></p>
<p><strong>Ultra success:</strong> Character <strong>deals damage</strong> &amp; something amazing occurs</p>
</section>
<section id="defence-outcomes" class="level2">
<h2 class="anchored" data-anchor-id="defence-outcomes"><strong>Defence outcomes</strong></h2>
<p><strong>Failure:</strong> Character <strong>takes damage</strong></p>
<p><strong>Partial success:</strong> Roll on <strong>defence complications table</strong></p>
<p><strong>Success:</strong> +1 extra space moved on <strong>Defence Action tracker</strong></p>
<p><strong>Ultra success:</strong> Immediately change to <strong>Offense phase</strong> &amp; something amazing occurs</p>
</section>
<section id="combat-threat-action-trackker" class="level2">
<h2 class="anchored" data-anchor-id="combat-threat-action-trackker"><strong>Combat threat &amp; action trackker</strong></h2>
<p>At the start of <strong>combat</strong> the <strong>combat threat</strong> is set to an appropriate level.</p>
<p>Normally <strong>combat</strong> starts on the <strong>offense phase</strong>.</p>
<p>The current <strong>phase’s action tracker</strong> is set to the vertically aligned <strong>Offense</strong> or <strong>Defence space</strong>. This determines how many <strong>combat actions</strong> can be carried out per <strong>phase</strong>. This is a maximum of 3 and a minimum of 1.</p>
<p>Each <strong>character</strong> (<strong>PCs</strong>, <strong>allies</strong>, <strong>NPCs</strong>, and <strong>enemies</strong>) can only <strong>attack once per phase</strong>.</p>
<p>Each character can be attacked multiple times per <strong>Defence phase</strong>.</p>
<p><strong>Tag team actions</strong> count as <strong>1 action</strong> during an <strong>Offense or Defence phase</strong>. If used during the <strong>Offense phase</strong> both characters can no longer act in the current phase.&nbsp;</p>
<p>After a <strong>combat action</strong> move the <strong>action tracker</strong> to the next number (3-&gt;2-&gt;1).</p>
<p>After the last <strong>action</strong>, change the <strong>phase</strong>. Set the <strong>action tracker</strong> to the vertically aligned space of the current <strong>combat threat</strong>.</p>
<p>The referee may reduce the <strong>combat threat</strong> when they feel appropriate. Examples include:</p>
<ul>
<li><p>Half the enemies are neutralised</p></li>
<li><p>A boss is neutralised</p></li>
</ul>
</section>
<section id="combat-threat-levels" class="level2">
<h2 class="anchored" data-anchor-id="combat-threat-levels"><strong>Combat threat levels</strong></h2>
<p><strong>Level 1:</strong> The players’ crew have an overwhelming advantage. They may have ambushed their enemies or have carried out a pitch perfect plan leading to combat.</p>
<p><strong>Level 3:</strong> The normal threat of combat. Neither the players or the enemies have a particular advantage.&nbsp;</p>
<p><strong>Level 5:</strong> The players’ crew are in an overwhelmingly disadvantageous position. Their plan may have horribly failed. They may have angered the enemies as they were trying to be diplomatic with them in their base.</p>
</section>
<section id="threat-action-tracker" class="level2">
<h2 class="anchored" data-anchor-id="threat-action-tracker"><strong>Threat &amp; action tracker</strong></h2>
<table class="table">
<tbody>
<tr class="odd">
<td>Threat</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
</tr>
<tr class="even">
<td>Offense</td>
<td></td>
<td></td>
<td>3</td>
<td>2</td>
<td>1</td>
</tr>
<tr class="odd">
<td>Defence</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="outcomes" class="level2">
<h2 class="anchored" data-anchor-id="outcomes"><strong>Outcomes</strong></h2>
<table class="table">
<colgroup>
<col style="width: 32%">
<col style="width: 35%">
<col style="width: 30%">
</colgroup>
<tbody>
<tr class="odd">
<td></td>
<td><strong>OFFENSE</strong></td>
<td><strong>DEFENCE</strong></td>
</tr>
<tr class="even">
<td><strong>Failure(6-)</strong></td>
<td><strong>+1</strong> on <strong>Action tracker</strong></td>
<td><strong>Full damage</strong></td>
</tr>
<tr class="odd">
<td><strong>Partial success (7-9)</strong></td>
<td><strong>Damage</strong> &amp; <strong>Complication</strong></td>
<td><strong>Complication</strong></td>
</tr>
<tr class="even">
<td><strong>Success (10+)</strong></td>
<td><strong>Damage</strong></td>
<td><strong>+1 on Action tracker</strong></td>
</tr>
<tr class="odd">
<td><strong>Ultra success (Two 6s)</strong></td>
<td><strong>Damage</strong>&amp;<br>
<strong>Something amazing</strong></td>
<td><strong>Go to Offense</strong> &amp; <strong><br>
Something amazing</strong></td>
</tr>
</tbody>
</table>
</section>
<section id="complications-ultra-successes" class="level2">
<h2 class="anchored" data-anchor-id="complications-ultra-successes"><strong>Complications &amp; ultra successes</strong></h2>
<p><strong>Complications</strong> can be completely made up by the referee or you can use one of the examples below.</p>
<p>When a player rolls an <strong>Ultra success</strong> <strong>something amazing happens!</strong> The referee should collaborate with the player to determine what amazing thing occurs. Examples are below.</p>
<p>If you use an example below try to describe how the effect comes about in the game world.</p>
<table class="table">
<colgroup>
<col style="width: 51%">
<col style="width: 48%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Complications</strong></th>
<th><strong>Ultra success</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><ul>
<li><p>Durability loss</p></li>
<li><p>½ DAMAGE</p></li>
<li><p>Disadvantage on next combat action</p></li>
<li><p>+1 Combat threat</p></li>
<li><p>Trade DAMAGE</p></li>
<li><p>Enemy reinforcements</p></li>
</ul></td>
<td><ul>
<li><p>Deal Double DAMAGE</p></li>
<li><p>-1 Combat threat</p></li>
<li><p>PC’s Ally arrives to help</p></li>
<li><p>Destroy a structure/vehicle</p></li>
<li><p>Destroy enemy’s armor/accessory</p></li>
<li><p>Player’s team easily escapes</p></li>
<li><p>Free attack (during defence)</p></li>
</ul></td>
</tr>
</tbody>
</table>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'alternate';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../RULES/ATTRIBUTES.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Attributes</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../RULES/EQUIPMENT.html" class="pagination-link">
        <span class="nav-page-text">Equipment</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left"><a href="https://creativecommons.org/licenses/by-sa/4.0/"><img src="https://licensebuttons.net/l/by-sa/4.0/88x31.png" alt="CC BY-SA 4.0" height="30"></a></div>   
    <div class="nav-footer-center"><a href="https://ko-fi.com/K3K6IRLA0"><img src="https://ko-fi.com/img/githubbutton_sm.svg" class="img-fluid" alt="ko-fi"></a></div>
    <div class="nav-footer-right"><a href="https://claymorerpgs.itch.io/fist"><img src="..\images/FIST_compatibility_mark_cropped.png" alt="FIST" height="40"></a></div>
  </div>
</footer>



</body></html>